var as3iModal=function(a){function b(a){return a.replace(/[^a-z]/g,"")}var c={prefix:"as3i",loading:!1,dismissible:!0},d={};return c.exists=function(c){var e=b(c);return void 0!==d[e]||!!a(c).length},c.open=function(e,f,g){var h=b(e);a("body").append('<div id="as3i-overlay"></div>');var i=a("#as3i-overlay");c.dismissible?i.append('<div id="as3i-modal"><span class="close-as3i-modal">Ã—</span></div>'):i.append('<div id="as3i-modal"></div>');var j=a("#as3i-modal");if(void 0===d[h]){var k=a(e);d[h]=k.clone(!0).css("display","block"),k.remove()}j.data("as3i-modal-target",e).append(d[h]),void 0!==g&&j.addClass(g),"function"==typeof f&&f(e),a("body").addClass("as3i-modal-open"),i.fadeIn(150),j.fadeIn(150),a("body").trigger("as3i-modal-open",[e])},c.close=function(b){if(!c.loading&&c.dismissible){var d=a("#as3i-modal").data("as3i-modal-target");a("#as3i-overlay").fadeOut(150,function(){a("body").removeClass("as3i-modal-open"),a(this).remove(),"function"==typeof b&&b(d)}),a("body").trigger("as3i-modal-close",[d])}},c.setLoadingState=function(a){c.loading=a},c.setDismissibleState=function(a){c.dismissible=a},a(document).ready(function(){a("body").on("click","[data-as3i-modal]",function(b){b.preventDefault(),c.open(a(this).data("as3i-modal")+"."+c.prefix)}),a("body").on("click","#as3i-overlay, .close-as3i-modal",function(a){if("A"!==a.target.tagName)return a.preventDefault(),a.target===this&&void c.close()})}),c}(jQuery);